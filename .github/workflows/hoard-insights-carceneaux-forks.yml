name: Collect repository insights for carceneaux-forks

on:
  schedule:
    - cron: '0 0 * * *' # Runs daily at midnight
  workflow_dispatch:

jobs:
  hoard-insights:
    runs-on: ubuntu-latest
    steps:
      - name: Collect insights
        uses: carceneaux/repository-insights-hoarder@v1.0.0
        with:
          insights_token: ${{ secrets.FORKS_TOKEN }}
          commit_token: ${{ secrets.COMMIT_TOKEN }}
          owner: carceneaux-forks
          all_repos: 'true'
          hoard_owner: carceneaux
          hoard_repo: repository_insights
          branch: 'main'
          directory: '.'
